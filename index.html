<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="description" content="event oriented javascript" />
  <title>Event oriented JavaScript - hub.js</title>
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <link rel="stylesheet" type="text/css" href="sh_nedit.min.css" />
  <!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-126897-7']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script');
      ga.type = 'text/javascript';
      ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' :
        'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    })();
  </script>
</head>
<body>
  <a href="https://github.com/mantoni/hub.js/"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_red_aa0000.png" alt="Fork me on GitHub"></a>

  <header>
    <h3>hub.js</h3>
    <h2>Event oriented JavaScript</h2>
    <!--
    <h4>
      Download v0.1.2 <a href="pkg/hub-0.1.2.js">source</a> or
      <a href="pkg/hub-0.1.2.min.js">minified</a>
    </h4>
    -->
  </header>

  <section>
    <h1>Why this project</h1>
    <p>
      This is an experiment to find out whether entire programs can be written
      using pub/sub and what is required to make that possible. It is running
      on Node and in the browser (using
      <a href="https://github.com/mantoni/nomo.js">nomo.js</a>). It should
      allow implementations to change from synchronous to asynchronous 
      without the need to change one of the callers. It should also allow to
      intercept or hook into exising behavior.
    </p>
    <p>
      The first implementation was getting too complicated
      and I've leared a lot on the way. Therefore I'm starting again from
      scratch which means this is all quite early, buggy and incomplete.
      Feel free to join or provide feedback. If you think all this is an
      utterly stupid idea, talk to the hand.
    </p>
    
    <h1>Publish &amp; subscribe</h1>
    <p>
      Pub/sub is the core concept in hub.js. Event names are dot separated
      identifiers.
    </p>
    <pre class="sh_javascript">
hub.on('hello.world', function () { /* ... */ });
hub.emit('hello.world');
</pre>
    <p>
      Listeners can take arguments and either return a value or expect a
      callback as the last argument that receives the return value. The
      following two listeners behave identically:
    </p>
    <pre class="sh_javascript">
hub.on('greet', function (who) {
  return 'Hello ' + who;
});
hub.on('greet', function (who, callback) {
  callback(null, 'Hello ' + who);
});
</pre>
    <p>
      Although there are two ways to return values, they can only be received
      via a callback. This allows listener implementations to change from
      synchronous to asynchronous without changing any of the "callers".
    </p>
    <pre class="sh_javascript">
hub.emit('greet', 'Hub', function (err, greeting) { /* ... */ });
</pre>
    <p>
      If multiple listeners are registered for the same event, a decision has
      to be made about how to deal with multiple return values. By default,
      the last non-undefined value is returned. There are a number of
      different strategies available, e.g. MERGE, CONCAT, MIN, MAX ...
      It is also possible to provide custom strategies. The strategy has to be
      the last argument before the callback.
    </p>
    <pre class="sh_javascript">
hub.emit('greet', 'Hub', hub.CONCAT, function (err, greeting) { /* ... */ });
</pre>
  </section>

  <footer>
    Copyright 2012, <a href="http://maxantoni.de">Maximilian Antoni</a> |
    <a href="https://github.com/mantoni">GitHub profile</a> |
    <a href="http://twitter.com/mantoni">Twitter</a> |
    <a href="http://semver.org/">Semantic versioning</a>
  </footer>
  <script type="text/javascript" src="sh_javascript.min.js"></script>
</body>
</html>
